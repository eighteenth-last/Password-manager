import{u as k,b as C,r as v,c as z,j as f,k as E,d,o as F,e as U,f as r,g as a,w as n,h as q,i as w,n as A,l as B,t as M,E as _}from"./index-3d7d46f8.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";const D={class:"register-container"},T={class:"register-card"},Z={class:"password-strength"},j={class:"strength-meter"},I={class:"strength-text"},L={class:"form-actions"},W={class:"register-footer"},$={__name:"RegisterView",setup(G){const h=k(),b=C(),u=v(!1),t=z({email:"",password:"",confirmPassword:""}),p=f(()=>{const s=t.password;if(!s)return 0;let e=0;s.length>=8&&e++,s.length>=12&&e++;const o=/[a-z]/.test(s),l=/[A-Z]/.test(s),c=/\d/.test(s),g=/[^a-zA-Z0-9]/.test(s);return(o&&l||c&&g)&&e++,o&&l&&c&&g&&e++,Math.min(3,e)}),y=f(()=>{const s=p.value;return s===0?"weak":s===1?"medium":s===2?"strong":"very-strong"}),V=f(()=>`${(p.value+1)*25}%`),S=f(()=>{const s=p.value;return s===0?"å¼±":s===1?"ä¸­":s===2?"å¼º":"éå¸¸å¼º"}),P={email:[{required:!0,message:"è¯·è¾“å…¥é‚®ç®±",trigger:"blur"},{type:"email",message:"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:8,message:"å¯†ç é•¿åº¦è‡³å°‘ä¸º8ä¸ªå­—ç¬¦",trigger:"blur"}],confirmPassword:[{required:!0,message:"è¯·å†æ¬¡è¾“å…¥å¯†ç ",trigger:"blur"},{validator:(s,e,o)=>{e!==t.password?o(new Error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´")):o()},trigger:"blur"}]};E(()=>t.password,()=>{var s;t.confirmPassword&&((s=m.value)==null||s.validateField("confirmPassword"))});const m=v(null),x=async()=>{var s,e;if(m.value)try{if(await m.value.validate(),p.value<2){_.warning("è¯·è®¾ç½®æ›´å¼ºçš„å¯†ç ");return}u.value=!0,await b.register({email:t.email,password:t.password}),_.success("æ³¨å†ŒæˆåŠŸ"),h.push("/dashboard")}catch(o){console.error("æ³¨å†Œå¤±è´¥:",o),_.error(((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||"æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{u.value=!1}};return(s,e)=>{const o=d("el-input"),l=d("el-form-item"),c=d("el-button"),g=d("el-form"),R=d("router-link");return F(),U("div",D,[r("div",T,[e[7]||(e[7]=r("div",{class:"register-header"},[r("div",{class:"logo"},"ğŸ”’"),r("h1",null,"å¯†ç ç®¡å®¶"),r("p",null,"åˆ›å»ºç®¡ç†å‘˜è´¦å·")],-1)),a(g,{ref_key:"registerFormRef",ref:m,model:t,rules:P,"label-position":"top",onSubmit:q(x,["prevent"])},{default:n(()=>[a(l,{label:"é‚®ç®±",prop:"email"},{default:n(()=>[a(o,{modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=i=>t.email=i),placeholder:"è¯·è¾“å…¥é‚®ç®±",type:"email",autocomplete:"email"},null,8,["modelValue"])]),_:1}),a(l,{label:"å¯†ç ",prop:"password"},{default:n(()=>[a(o,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=i=>t.password=i),placeholder:"è¯·è¾“å…¥å¯†ç ",type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1}),a(l,{label:"ç¡®è®¤å¯†ç ",prop:"confirmPassword"},{default:n(()=>[a(o,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=i=>t.confirmPassword=i),placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç ",type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])]),_:1}),r("div",Z,[e[3]||(e[3]=r("div",{class:"strength-label"},"å¯†ç å¼ºåº¦:",-1)),r("div",j,[r("div",{class:A(["strength-bar",y.value]),style:B({width:V.value})},null,6)]),r("div",I,M(S.value),1)]),r("div",L,[a(c,{type:"primary","native-type":"submit",loading:u.value,disabled:u.value,class:"submit-btn"},{default:n(()=>[...e[4]||(e[4]=[w(" æ³¨å†Œ ",-1)])]),_:1},8,["loading","disabled"])])]),_:1},8,["model"]),r("div",W,[r("p",null,[e[6]||(e[6]=w(" å·²æœ‰è´¦å·ï¼Ÿ ",-1)),a(R,{to:"/login"},{default:n(()=>[...e[5]||(e[5]=[w("ç«‹å³ç™»å½•",-1)])]),_:1})])])])])}}},O=N($,[["__scopeId","data-v-51b2116a"]]);export{O as default};
