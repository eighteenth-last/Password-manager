import{r as f,k as _e,d as m,o as k,p as I,w as s,f as o,g as l,i as d,e as se,H as ye,I as he,q as fe,E as u,v as ve,a as Ze,j as X,F as Ge,G as He,J as Je,m as le,t as L,n as Oe,l as Ye,P as et,K as tt,L as lt,R as st,Q as at,S as ot}from"./index-3d7d46f8.js";import{u as xe}from"./passwords-fd45e788.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";const nt={class:"browser-import-dialog-content"},rt={key:0,class:"import-errors"},it={class:"dialog-footer"},ut={__name:"BrowserImportDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","imported"],setup(be,{emit:we}){const g=xe(),B=we,j=be,z=f(j.visible),$=f(!1),Q=f([]),V=f([]),x=f(null);_e(()=>j.visible,w=>{z.value=w}),_e(()=>z.value,w=>{B("update:visible",w),w||(Q.value=[],V.value=[],x.value=null)});const U=w=>{x.value=w.raw,Q.value=[w]},E=()=>{z.value=!1},W=w=>new Promise((i,p)=>{const y=new FileReader;y.onload=v=>i(v.target.result),y.onerror=v=>p(new Error("读取文件失败")),y.readAsText(w)}),A=w=>{const i=[],p=[];try{const y=w.split(`
`);if(y.length<2)throw new Error("CSV文件格式不正确或为空");const v=y[0].trim().split(","),b=v.findIndex(C=>C.toLowerCase()==="name"),c=v.findIndex(C=>C.toLowerCase()==="url"),S=v.findIndex(C=>C.toLowerCase()==="username"),R=v.findIndex(C=>C.toLowerCase()==="password");if(b===-1||c===-1||S===-1||R===-1)throw new Error("CSV文件缺少必要的列(name/url/username/password)");for(let C=1;C<y.length;C++){const q=y[C].trim();if(!q)continue;const F=[];let M="",Z=!1;for(let N=0;N<q.length;N++){const oe=q[N];oe==='"'?Z&&N+1<q.length&&q[N+1]==='"'?(M+='"',N++):Z=!Z:oe===","&&!Z?(F.push(M),M=""):M+=oe}if(F.push(M),F.length<=Math.max(b,c,S,R)){p.push(`第${C}行: 字段数不足`);continue}const de=F[b],ge=F[c],ae=F[S],ce=F[R];if(!de){p.push(`第${C}行: 缺少网站名称`);continue}if(!ae){p.push(`第${C}行: 缺少用户名`);continue}if(!ce){p.push(`第${C}行: 缺少密码`);continue}i.push({domain:de,url:ge,username:ae,password:ce})}}catch(y){p.push(`解析CSV文件失败: ${y.message}`)}return{passwords:i,errors:p}},D=async(w=!1)=>{if(!x.value){u.warning("请先选择要导入的CSV文件");return}if(!x.value.name.toLowerCase().endsWith(".csv")){u.warning("请上传CSV格式的文件");return}if($.value=!0,V.value=[],w)try{await ve.confirm("全部导入将会导入所有记录，如果存在重复的账号密码记录，将会覆盖已有的记录。是否继续？","确认操作",{confirmButtonText:"确认导入",cancelButtonText:"取消",type:"warning"})}catch{$.value=!1;return}try{const i=await W(x.value),{passwords:p,errors:y}=A(i);if(V.value=y,p.length===0){u.warning("没有找到有效的密码记录"),$.value=!1;return}const v=await g.importPasswords(p,w);if(v.importedCount>0){if(u.success(`成功导入 ${v.importedCount} 条密码记录`),v.skippedCount>0){const b=v.skippedDetails||[];V.value=[...V.value,...b.map(c=>`跳过: ${c}`)],u.warning(`${v.skippedCount} 条记录被跳过，请查看详细信息`)}else E();B("imported",v.importedCount)}else v.errors&&v.errors.length>0&&(V.value=[...V.value,...v.errors]),u.warning("没有成功导入任何密码记录，请检查文件格式是否正确")}catch(i){console.error("导入密码失败:",i),u.error("导入密码失败: "+(i.message||"未知错误")),V.value.push("导入过程中发生错误: "+(i.message||"未知错误"))}finally{$.value=!1}};return(w,i)=>{const p=m("el-button"),y=m("el-upload"),v=m("el-alert"),b=m("el-tooltip"),c=m("el-dialog");return k(),I(c,{modelValue:z.value,"onUpdate:modelValue":i[2]||(i[2]=S=>z.value=S),title:"从浏览器导入密码",width:"560px"},{footer:s(()=>[o("span",it,[l(p,{onClick:E},{default:s(()=>[...i[8]||(i[8]=[d("取消",-1)])]),_:1}),l(p,{type:"primary",onClick:i[0]||(i[0]=S=>D(!1)),loading:$.value},{default:s(()=>[...i[9]||(i[9]=[d("导入",-1)])]),_:1},8,["loading"]),l(b,{content:"导入所有记录，重复的记录会更新已有密码"},{default:s(()=>[l(p,{type:"warning",onClick:i[1]||(i[1]=S=>D(!0)),loading:$.value},{default:s(()=>[...i[10]||(i[10]=[d("全部导入",-1)])]),_:1},8,["loading"])]),_:1})])]),default:s(()=>[o("div",nt,[i[6]||(i[6]=o("p",null,"请从浏览器导出密码文件后上传：",-1)),i[7]||(i[7]=o("div",{class:"browser-instructions"},[o("h4",null,"Chrome 浏览器"),o("ol",null,[o("li",null,[d("打开 "),o("code",null,"chrome://password-manager/passwords")]),o("li",null,'点击右上角的"⋮"图标'),o("li",null,'选择"导出密码"'),o("li",null,"保存CSV文件")]),o("h4",null,"Edge 浏览器"),o("ol",null,[o("li",null,[d("打开 "),o("code",null,"edge://wallet/passwords")]),o("li",null,'点击"⋯"菜单'),o("li",null,'选择"导出密码"'),o("li",null,"保存CSV文件")])],-1)),l(y,{class:"csv-upload",action:"#","auto-upload":!1,"on-change":U,"file-list":Q.value,accept:".csv",limit:1},{trigger:s(()=>[l(p,{type:"primary"},{default:s(()=>[...i[3]||(i[3]=[d("选择CSV文件",-1)])]),_:1})]),tip:s(()=>[...i[4]||(i[4]=[o("div",{class:"el-upload__tip"}," 仅支持Chrome和Edge浏览器导出的CSV格式密码文件 ",-1)])]),_:1},8,["file-list"]),V.value.length>0?(k(),se("div",rt,[i[5]||(i[5]=o("h4",null,"导入错误",-1)),(k(!0),se(ye,null,he(V.value,(S,R)=>(k(),I(v,{key:R,type:"warning",title:S,closable:!1,"show-icon":""},null,8,["title"]))),128))])):fe("",!0)])]),_:1},8,["modelValue"])}}},dt=De(ut,[["__scopeId","data-v-c3027625"]]);const ct={class:"passwords-view"},pt={class:"page-header"},mt={class:"filter-section"},ft={class:"filter-header"},vt={class:"filter-title"},wt={class:"filter-item"},gt={class:"filter-item"},_t={class:"filter-item"},yt={class:"action-buttons"},ht={class:"domain-cell"},bt={class:"domain-icon"},Ct={class:"domain-cell"},kt={class:"domain-icon"},Vt={class:"import-dialog-content"},Pt={key:0,class:"import-errors"},$t={class:"dialog-footer"},xt={class:"password-strength"},Dt={class:"strength-meter"},St={class:"strength-text"},Tt={__name:"PasswordsView",setup(be){const we=Ze(),g=xe(),B=f(!0),j=f(!1),z=f(!1),$=f(!1),Q=f(!1),V=f("my"),x=f(""),U=f(""),E=f(!1),W=f(!1),A=f(!1),D=f(!1),w=f(null),i=f([]),p=f([]),y=f(null),v=f(!1),b=f([]),c=f({domain:"",url:"",username:"",password:""}),S={domain:[{required:!0,message:"请输入网站名称",trigger:"blur"}],url:[{type:"url",message:"请输入有效的URL",trigger:["blur","change"],validator:(t,e,n)=>{e===""||e===void 0||e===null||/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w.-]*)*\/?$/.test(e)?n():n(new Error("请输入有效的URL"))}}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,message:"密码不能为空",trigger:"blur"}]},R=f(null),C=X(()=>V.value==="my"?g.domains:g.sharedDomains),q=X(()=>{let t=[...g.passwords];if(U.value&&(t=t.filter(e=>e.domain===U.value)),x.value){const e=x.value.toLowerCase();t=t.filter(n=>n.domain.toLowerCase().includes(e)||n.encrypted_username&&n.encrypted_username.toLowerCase().includes(e))}return t.sort((e,n)=>new Date(n.updated_at)-new Date(e.updated_at))}),F=X(()=>{let t=[...g.sharedPasswords];if(U.value&&(t=t.filter(e=>e.domain===U.value)),x.value){const e=x.value.toLowerCase();t=t.filter(n=>n.domain.toLowerCase().includes(e)||n.encrypted_username&&n.encrypted_username.toLowerCase().includes(e)||n.owner_email&&n.owner_email.toLowerCase().includes(e))}return t.sort((e,n)=>new Date(n.updated_at)-new Date(e.updated_at))}),M=X(()=>{const t=c.value.password;if(!t)return 0;let e=0;t.length>=8&&e++,t.length>=12&&e++;const n=/[a-z]/.test(t),r=/[A-Z]/.test(t),_=/\d/.test(t),h=/[^a-zA-Z0-9]/.test(t);return(n&&r||_&&h)&&e++,n&&r&&_&&h&&e++,Math.min(3,e)}),Z=X(()=>{const t=M.value;return t===0?"weak":t===1?"medium":t===2?"strong":"very-strong"}),de=X(()=>`${(M.value+1)*25}%`),ge=X(()=>{const t=M.value;return t===0?"弱":t===1?"中":t===2?"强":"非常强"});Ge(async()=>{try{await ae(),we.query.action==="add"&&Ve()}catch(t){console.error("加载数据失败:",t),u.error("加载数据失败，请稍后重试")}finally{B.value=!1}}),_e(V,()=>{U.value="",x.value=""});const ae=async()=>{await g.fetchPasswords(),await g.fetchSharedPasswords()},ce=async()=>{B.value=!0;try{await ae(),u.success("密码数据已刷新")}catch(t){console.error("刷新密码失败:",t),u.error("刷新密码失败，请稍后重试")}finally{B.value=!1}},N=async()=>{j.value=!0;try{await g.syncPasswords(),u.success("同步成功")}catch(t){console.error("同步失败:",t),u.error("同步失败，请稍后重试")}finally{j.value=!1}},oe=()=>{U.value="",x.value=""},Ce=()=>{},Se=t=>new Date(t).toLocaleString(),ke=t=>{try{const e=t.encrypted_password||t.password||"";if(!e){u.warning(`${t.domain} 的密码为空，无法复制`);return}navigator.clipboard.writeText(e).then(()=>{u.success(`已复制 ${t.domain} 的密码`)}).catch(n=>{console.error("无法复制到剪贴板:",n),u.error("复制失败，请检查浏览器权限")})}catch(e){console.error("复制密码时出错:",e),u.error("复制密码失败")}},Ve=()=>{A.value=!1,D.value=!1,w.value=null,c.value={domain:"",url:"",username:"",password:""},E.value=!0},Te=t=>{A.value=!0,w.value=t.id,D.value=!1,c.value={domain:t.domain,url:t.website_url||"",username:t.encrypted_username||t.username||"",password:t.encrypted_password||t.password||""},E.value=!0},Le=t=>{A.value=!0,D.value=!0,w.value=t.id,c.value={domain:t.domain,url:t.website_url||"",username:t.encrypted_username||t.username||"",password:t.encrypted_password||t.password||""},E.value=!0},Ie=t=>{ve.confirm(`确定要删除 ${t.domain} 的密码吗？`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{Be(t.id)}).catch(()=>{})},Be=async t=>{B.value=!0;try{await g.deletePassword(t),u.success("密码已删除")}catch(e){console.error("删除密码失败:",e),u.error("删除密码失败，请稍后重试")}finally{B.value=!1}},Ue=t=>{b.value=t},Ee=()=>{if(b.value.length===0){u.warning("请先选择要删除的密码");return}ve.confirm(`确定要删除选中的 ${b.value.length} 个密码吗？此操作不可撤销。`,"批量删除确认",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).then(()=>{Fe()}).catch(()=>{})},Fe=async()=>{if(b.value.length!==0){Q.value=!0;try{const t=b.value.map(e=>e.id);await g.batchDeletePasswords(t),u.success(`成功删除 ${b.value.length} 个密码`),b.value=[],await g.fetchPasswords()}catch(t){console.error("批量删除密码失败:",t),u.error("批量删除密码失败，请稍后重试")}finally{Q.value=!1}}},ze=async()=>{if(R.value)try{await R.value.validate(),z.value=!0;const e={domain:c.value.domain,url:c.value.url||"",username:c.value.username,password:c.value.password};A.value?D.value?(await g.updateSharedPassword(w.value,{password:c.value.password}),u.success("共享密码已更新"),await g.fetchSharedPasswords()):(await g.updatePassword(w.value,e),u.success("密码已更新"),await g.fetchPasswords()):(await g.addPassword(e),u.success("密码已添加")),E.value=!1}catch(t){console.error("提交密码失败:",t),u.error("提交密码失败，请稍后重试")}finally{z.value=!1}},Ae=()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_=+";let n="";for(let r=0;r<16;r++){const _=Math.floor(Math.random()*e.length);n+=e[_]}c.value.password=n},Re=async()=>{try{const t=await navigator.clipboard.readText();c.value.password=t,u.success("密码已从剪贴板粘贴")}catch(t){console.error("无法访问剪贴板:",t),u.error("无法访问剪贴板，请检查浏览器权限设置")}},Me=()=>{W.value=!0,i.value=[],p.value=[],y.value=null},qe=t=>{y.value=t.raw,i.value=[t]},Ne=t=>{const e=t.split(/\n\s*\n/),n=[],r=[];return e.forEach((_,h)=>{var K,pe;try{const G=_.trim();if(!G)return;const H=G.split(`
`);if(H.length<2){r.push(`第${h+1}条记录格式不正确: 信息不完整`);return}const J=H[0].trim(),P=J.endsWith(":")?J.slice(0,-1).trim():J.replace(":","").trim(),ne=["账户:","账号:","账户：","账号：","用户名:","用户名："],O=H.find(T=>ne.some(ue=>T.includes(ue)));if(!O){r.push(`第${h+1}条记录格式不正确: 缺少账户信息`);return}let Y="";for(const T of ne)if(O.includes(T)){Y=(K=O.split(T)[1])==null?void 0:K.trim();break}const me=["密码:","密码："],re=H.find(T=>me.some(ue=>T.includes(ue)));if(!re){r.push(`第${h+1}条记录格式不正确: 缺少密码信息`);return}let ie="";for(const T of me)if(re.includes(T)){ie=(pe=re.split(T)[1])==null?void 0:pe.trim();break}if(!P){r.push(`第${h+1}条记录格式不正确: 缺少平台名称`);return}if(!Y){r.push(`第${h+1}条记录格式不正确: 账户名称为空`);return}if(!ie){r.push(`第${h+1}条记录格式不正确: 密码为空`);return}n.push({domain:P,url:P.includes(".")?`https://${P}`:"",username:Y,password:ie})}catch(G){r.push(`第${h+1}条记录解析失败: ${G.message}`)}}),{passwords:n,errors:r}},Ke=()=>{v.value=!0},Qe=async t=>{await g.fetchPasswords()},Pe=async(t=!1)=>{if(!y.value){u.warning("请先选择要导入的TXT文件");return}if($.value=!0,p.value=[],t)try{await ve.confirm("全部导入将会导入所有记录，如果存在重复的账号密码记录，将会覆盖已有的记录。是否继续？","确认操作",{confirmButtonText:"确认导入",cancelButtonText:"取消",type:"warning"})}catch{$.value=!1;return}try{const e=await We(y.value),{passwords:n,errors:r}=Ne(e);if(p.value=r,n.length===0){u.warning("没有找到有效的密码记录");return}const _=await g.importPasswords(n,t);if(_.importedCount>0){if(u.success(`成功导入 ${_.importedCount} 条密码记录`),_.skippedCount>0){const h=_.skippedDetails||[];p.value=[...p.value,...h.map(K=>`跳过: ${K}`)],u.warning(`${_.skippedCount} 条记录被跳过，请查看详细信息`)}else W.value=!1;await g.fetchPasswords()}else _.errors&&_.errors.length>0&&(p.value=[...p.value,..._.errors]),u.warning("没有成功导入任何密码记录，请检查文件格式")}catch(e){console.error("导入密码失败:",e),u.error("导入密码失败: "+(e.message||"未知错误"))}finally{$.value=!1}},We=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=_=>e(_.target.result),r.onerror=_=>n(new Error("读取文件失败")),r.readAsText(t)});return(t,e)=>{const n=m("el-icon"),r=m("el-button"),_=m("el-icon-search"),h=m("el-input"),K=m("el-col"),pe=m("el-option"),G=m("el-select"),H=m("el-row"),J=m("el-card"),P=m("el-table-column"),ne=m("el-table"),O=m("el-empty"),Y=m("el-tab-pane"),me=m("el-tag"),re=m("el-tabs"),ie=m("el-upload"),T=m("el-alert"),ue=m("el-tooltip"),$e=m("el-dialog"),ee=m("el-form-item"),Xe=m("el-form"),je=He("loading");return k(),se("div",ct,[o("div",pt,[e[15]||(e[15]=o("h1",{class:"page-title"},"密码管理",-1)),l(r,{type:"primary",onClick:Ve},{default:s(()=>[l(n,null,{default:s(()=>[l(le(et))]),_:1}),e[14]||(e[14]=d(" 添加密码 ",-1))]),_:1})]),o("div",mt,[l(J,{class:"filter-card",shadow:"hover"},{default:s(()=>[o("div",ft,[o("h3",vt,[l(n,{class:"filter-icon"},{default:s(()=>[l(_)]),_:1}),e[16]||(e[16]=d(" 筛选与操作 ",-1))])]),l(H,{gutter:16,class:"filter-content"},{default:s(()=>[l(K,{span:6},{default:s(()=>[o("div",wt,[e[17]||(e[17]=o("label",{class:"filter-label"},"搜索密码",-1)),l(h,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),placeholder:"搜索网站或用户名",clearable:"","prefix-icon":"el-icon-search",onInput:Ce,class:"search-input"},null,8,["modelValue"])])]),_:1}),l(K,{span:6},{default:s(()=>[o("div",gt,[e[18]||(e[18]=o("label",{class:"filter-label"},"选择网站",-1)),l(G,{modelValue:U.value,"onUpdate:modelValue":e[1]||(e[1]=a=>U.value=a),placeholder:"选择网站",clearable:"",style:{width:"100%"},onChange:Ce,class:"domain-select"},{default:s(()=>[(k(!0),se(ye,null,he(C.value,a=>(k(),I(pe,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),l(K,{span:12},{default:s(()=>[o("div",_t,[e[23]||(e[23]=o("label",{class:"filter-label"},"操作",-1)),o("div",yt,[l(r,{onClick:ce,loading:B.value,class:"action-btn"},{default:s(()=>[l(n,null,{default:s(()=>[l(le(tt))]),_:1}),e[19]||(e[19]=d(" 刷新 ",-1))]),_:1},8,["loading"]),l(r,{type:"success",onClick:N,loading:j.value,class:"action-btn"},{default:s(()=>[l(n,null,{default:s(()=>[l(le(lt))]),_:1}),e[20]||(e[20]=d(" 同步 ",-1))]),_:1},8,["loading"]),l(r,{type:"primary",onClick:Me,loading:$.value,class:"action-btn"},{default:s(()=>[l(n,null,{default:s(()=>[l(le(st))]),_:1}),e[21]||(e[21]=d(" 导入TXT ",-1))]),_:1},8,["loading"]),l(r,{type:"info",onClick:Ke,loading:$.value,class:"action-btn"},{default:s(()=>[l(n,null,{default:s(()=>[l(le(at))]),_:1}),e[22]||(e[22]=d(" 浏览器导入 ",-1))]),_:1},8,["loading"]),l(r,{type:"danger",onClick:Ee,disabled:b.value.length===0,loading:Q.value,class:"action-btn batch-delete-btn"},{default:s(()=>[l(n,null,{default:s(()=>[l(le(ot))]),_:1}),d(" 批量删除 ("+L(b.value.length)+") ",1)]),_:1},8,["disabled","loading"])])])]),_:1})]),_:1})]),_:1})]),Je((k(),I(J,{class:"password-list-card"},{default:s(()=>[l(re,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=a=>V.value=a),onTabClick:oe},{default:s(()=>[l(Y,{label:"我的密码",name:"my"},{default:s(()=>[q.value.length>0?(k(),I(ne,{key:0,data:q.value,style:{width:"100%"},onSelectionChange:Ue},{default:s(()=>[l(P,{type:"selection",width:"55"}),l(P,{prop:"domain",label:"网站名称",width:"180"},{default:s(a=>[o("div",ht,[o("div",bt,L(a.row.domain.charAt(0).toUpperCase()),1),o("span",null,L(a.row.domain),1)])]),_:1}),l(P,{prop:"encrypted_username",label:"用户名"},{default:s(a=>[d(L(a.row.encrypted_username),1)]),_:1}),l(P,{prop:"updated_at",label:"更新时间",width:"180"},{default:s(a=>[d(L(Se(a.row.updated_at)),1)]),_:1}),l(P,{label:"操作",width:"250"},{default:s(a=>[l(r,{size:"small",onClick:te=>ke(a.row),type:"primary",plain:""},{default:s(()=>[...e[24]||(e[24]=[d(" 复制密码 ",-1)])]),_:1},8,["onClick"]),l(r,{size:"small",onClick:te=>Te(a.row),type:"info",plain:""},{default:s(()=>[...e[25]||(e[25]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"]),l(r,{size:"small",onClick:te=>Ie(a.row),type:"danger",plain:""},{default:s(()=>[...e[26]||(e[26]=[d(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])):(k(),I(O,{key:1,description:"没有找到密码记录"}))]),_:1}),l(Y,{label:"共享密码",name:"shared"},{default:s(()=>[F.value.length>0?(k(),I(ne,{key:0,data:F.value,style:{width:"100%"}},{default:s(()=>[l(P,{prop:"domain",label:"网站名称",width:"180"},{default:s(a=>[o("div",Ct,[o("div",kt,L(a.row.domain.charAt(0).toUpperCase()),1),o("span",null,L(a.row.domain),1)])]),_:1}),l(P,{prop:"encrypted_username",label:"用户名"},{default:s(a=>[d(L(a.row.encrypted_username),1)]),_:1}),l(P,{prop:"owner_email",label:"共享者",width:"180"}),l(P,{label:"权限",width:"100"},{default:s(a=>[l(me,{type:a.row.permissions==="read"?"info":"warning"},{default:s(()=>[d(L(a.row.permissions==="read"?"只读":"读写"),1)]),_:2},1032,["type"])]),_:1}),l(P,{label:"操作",width:"200"},{default:s(a=>[l(r,{size:"small",onClick:te=>ke(a.row),type:"primary",plain:""},{default:s(()=>[...e[27]||(e[27]=[d(" 复制密码 ",-1)])]),_:1},8,["onClick"]),a.row.permissions==="write"?(k(),I(r,{key:0,size:"small",onClick:te=>Le(a.row),type:"info",plain:""},{default:s(()=>[...e[28]||(e[28]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"])):fe("",!0)]),_:1})]),_:1},8,["data"])):(k(),I(O,{key:1,description:"没有共享的密码记录"}))]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[je,B.value]]),l(dt,{visible:v.value,"onUpdate:visible":e[3]||(e[3]=a=>v.value=a),onImported:Qe},null,8,["visible"]),l($e,{modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=a=>W.value=a),title:"导入密码文件",width:"500px"},{footer:s(()=>[o("span",$t,[l(r,{onClick:e[4]||(e[4]=a=>W.value=!1)},{default:s(()=>[...e[34]||(e[34]=[d("取消",-1)])]),_:1}),l(r,{type:"primary",onClick:e[5]||(e[5]=a=>Pe(!1)),loading:$.value},{default:s(()=>[...e[35]||(e[35]=[d("导入",-1)])]),_:1},8,["loading"]),l(ue,{content:"导入所有记录，重复的记录会更新已有密码"},{default:s(()=>[l(r,{type:"warning",onClick:e[6]||(e[6]=a=>Pe(!0)),loading:$.value},{default:s(()=>[...e[36]||(e[36]=[d("全部导入",-1)])]),_:1},8,["loading"])]),_:1})])]),default:s(()=>[o("div",Vt,[e[31]||(e[31]=o("p",null,"请选择TXT格式的密码文件进行导入。支持以下文件格式：",-1)),e[32]||(e[32]=o("pre",null,`            格式一：
            平台名称:
            账户: 用户名
            密码: 密码

            格式二：
            平台名称
            账号: 用户名
            密码: 密码

            格式三：
            平台名称:
            账号：用户名
            密码：密码
        `,-1)),e[33]||(e[33]=o("p",{class:"format-note"},"注：每组密码信息之间请用空行分隔",-1)),l(ie,{class:"txt-upload",action:"#","auto-upload":!1,"on-change":qe,"file-list":i.value,accept:".txt",limit:1},{trigger:s(()=>[l(r,{type:"primary"},{default:s(()=>[...e[29]||(e[29]=[d("选择文件",-1)])]),_:1})]),_:1},8,["file-list"]),p.value.length>0?(k(),se("div",Pt,[e[30]||(e[30]=o("h4",null,"导入错误",-1)),(k(!0),se(ye,null,he(p.value,(a,te)=>(k(),I(T,{key:te,type:"warning",title:a,closable:!1,"show-icon":""},null,8,["title"]))),128))])):fe("",!0)])]),_:1},8,["modelValue"]),l($e,{modelValue:E.value,"onUpdate:modelValue":e[13]||(e[13]=a=>E.value=a),title:A.value?D.value?"编辑共享密码":"编辑密码":"添加密码",width:"500px"},{default:s(()=>[l(Xe,{ref_key:"passwordFormRef",ref:R,model:c.value,rules:S,"label-width":"100px"},{default:s(()=>[l(ee,{label:"网站名称",prop:"domain"},{default:s(()=>[l(h,{modelValue:c.value.domain,"onUpdate:modelValue":e[8]||(e[8]=a=>c.value.domain=a),placeholder:"给网站起一个便于记忆的名称",disabled:D.value},null,8,["modelValue","disabled"])]),_:1}),l(ee,{label:"网站地址",prop:"url"},{default:s(()=>[l(h,{modelValue:c.value.url,"onUpdate:modelValue":e[9]||(e[9]=a=>c.value.url=a),placeholder:"https://example.com",disabled:D.value},null,8,["modelValue","disabled"])]),_:1}),l(ee,{label:"用户名",prop:"username"},{default:s(()=>[l(h,{modelValue:c.value.username,"onUpdate:modelValue":e[10]||(e[10]=a=>c.value.username=a),placeholder:"用户名或邮箱",disabled:D.value},null,8,["modelValue","disabled"])]),_:1}),l(ee,{label:"密码",prop:"password"},{default:s(()=>[l(h,{modelValue:c.value.password,"onUpdate:modelValue":e[11]||(e[11]=a=>c.value.password=a),type:"text",placeholder:"密码",onpaste:()=>!0},{append:s(()=>[l(r,{onClick:Re},{default:s(()=>[...e[37]||(e[37]=[d("粘贴",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(ee,{label:"密码强度"},{default:s(()=>[o("div",xt,[o("div",Dt,[o("div",{class:Oe(["strength-bar",Z.value]),style:Ye({width:de.value})},null,6)]),o("div",St,L(ge.value),1)])]),_:1}),l(ee,null,{default:s(()=>[l(r,{type:"primary",onClick:ze,loading:z.value},{default:s(()=>[d(L(A.value?"保存":"添加"),1)]),_:1},8,["loading"]),l(r,{onClick:e[12]||(e[12]=a=>E.value=!1)},{default:s(()=>[...e[38]||(e[38]=[d("取消",-1)])]),_:1}),A.value?fe("",!0):(k(),I(r,{key:0,type:"info",onClick:Ae},{default:s(()=>[...e[39]||(e[39]=[d(" 生成密码 ",-1)])]),_:1}))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ut=De(Tt,[["__scopeId","data-v-ebb111e2"]]);export{Ut as default};
