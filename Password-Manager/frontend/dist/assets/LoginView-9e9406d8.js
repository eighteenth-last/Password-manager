import{u as x,a as k,b as R,r as c,c as L,d as a,o as q,e as B,f as o,g as l,w as r,h as E,i as m,E as _}from"./index-3d7d46f8.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const N={class:"login-container"},S={class:"login-card"},C={class:"form-actions"},M={class:"login-footer"},U={__name:"LoginView",setup(A){const g=x(),f=k(),v=R(),n=c(!1),s=L({email:"",password:""}),w={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6个字符",trigger:"blur"}]},i=c(null),b=async()=>{var u,e;if(i.value)try{await i.value.validate(),n.value=!0,await v.login({email:s.email,password:s.password}),_.success("登录成功");const t=f.query.redirect||"/dashboard";g.push(t)}catch(t){console.error("登录失败:",t),_.error(((e=(u=t.response)==null?void 0:u.data)==null?void 0:e.message)||"登录失败，请检查邮箱和密码")}finally{n.value=!1}};return(u,e)=>{const t=a("el-input"),p=a("el-form-item"),y=a("el-button"),V=a("el-form"),h=a("router-link");return q(),B("div",N,[o("div",S,[e[5]||(e[5]=o("div",{class:"login-header"},[o("div",{class:"logo"},"🔒"),o("h1",null,"密码管家"),o("p",null,"管理后台登录")],-1)),l(V,{ref_key:"loginFormRef",ref:i,model:s,rules:w,"label-position":"top",onSubmit:E(b,["prevent"])},{default:r(()=>[l(p,{label:"邮箱",prop:"email"},{default:r(()=>[l(t,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=d=>s.email=d),placeholder:"请输入邮箱",type:"email",autocomplete:"email"},null,8,["modelValue"])]),_:1}),l(p,{label:"密码",prop:"password"},{default:r(()=>[l(t,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=d=>s.password=d),placeholder:"请输入密码",type:"password",autocomplete:"current-password","show-password":""},null,8,["modelValue"])]),_:1}),o("div",C,[l(y,{type:"primary","native-type":"submit",loading:n.value,disabled:n.value,class:"submit-btn"},{default:r(()=>[...e[2]||(e[2]=[m(" 登录 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1},8,["model"]),o("div",M,[o("p",null,[e[4]||(e[4]=m(" 还没有账号？ ",-1)),l(h,{to:"/register"},{default:r(()=>[...e[3]||(e[3]=[m("立即注册",-1)])]),_:1})])])])])}}},T=F(U,[["__scopeId","data-v-49080580"]]);export{T as default};
